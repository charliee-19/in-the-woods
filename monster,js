import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js";

export class Monster {
  constructor(scene, player){
    this.player = player;
    this.speed = 0.02;
    this.learnedDir = new THREE.Vector3();

    this.mesh = new THREE.Mesh(
      new THREE.BoxGeometry(1,2,1),
      new THREE.MeshStandardMaterial({ color: 0x330000 })
    );
    this.mesh.position.set(10,1,10);
    scene.add(this.mesh);
  }

  update(){
    const dir = new THREE.Vector3().subVectors(
      this.player.position,
      this.mesh.position
    ).normalize();

    this.learnedDir.lerp(dir, 0.02);
    this.mesh.position.add(this.learnedDir.multiplyScalar(this.speed));

    if(this.mesh.position.distanceTo(this.player.position) < 1){
      alert("You survived until the monster ate you.");
      location.reload();
    }
  }

  levelUp(){
    this.speed += 0.01;
  }
}
